{
  "meta": {
    "title": "4K-3D Code Blueprint",
    "quality": "4K-3D",
    "version": "1.5"
  },
  "project_structure": {
    "root": [
      "package.json",
      "vite.config.js",
      ".eslintrc.cjs",
      "postcss.config.cjs"
    ],
    "src": {
      "main": "src/main.jsx",
      "routes": "src/pages/*",
      "components": "src/components/*",
      "three": "src/three/* (Canvas, Loaders, Scenes, Helpers)",
      "styles": "src/styles/*"
    },
    "server": "server/index.js (express wrapper for api + supabase hooks)"
  },
  "example_package_json": {
    "name": "immersive-site",
    "version": "0.1.0",
    "scripts": {
      "dev": "vite",
      "build": "vite build",
      "preview": "vite preview",
      "lint": "eslint 'src/**/*.{js,jsx}'",
      "test": "vitest"
    },
    "dependencies": {
      "react": "^18.2.0",
      "react-dom": "^18.2.0",
      "three": "^0.154.0",
      "@react-three/fiber": "^8.0.0",
      "@react-three/drei": "^9.0.0",
      "gsap": "^3.12.0",
      "zustand": "^4.1.0",
      "react-query": "^4.0.0"
    }
  },
  "three_scene_config_examples": {
    "hero_scene": {
      "canvas": {
        "pixelRatio": [
          1,
          2
        ],
        "preserveDrawingBuffer": false,
        "shadowMap": true
      },
      "loaders": [
        {
          "type": "GLTFLoader",
          "options": {
            "draco": true
          }
        },
        {
          "type": "TextureLoader"
        }
      ],
      "scene_graph": [
        {
          "id": "envMap",
          "type": "hdr",
          "path": "public/hdr/studio.hdr"
        },
        {
          "id": "heroModel",
          "type": "glb",
          "path": "public/3d/hero_lod0.glb",
          "position": [
            0,
            -0.5,
            0
          ],
          "scale": [
            1,
            1,
            1
          ]
        }
      ],
      "postprocessing": [
        "EffectComposer",
        "Bloom",
        "FXAA"
      ]
    }
  },
  "loader_patterns": {
    "signed_url_fetch": {
      "flow": [
        "client requests /api/meta/hero",
        "server returns JSON with signed URLs (short-lived)",
        "client GLTFLoader loads signed URL directly from CDN"
      ]
    },
    "streaming_and_lod": {
      "flow": [
        "load tiny placeholder (poster)",
        "fetch LOD1 (low-poly)",
        "when idle fetch full LOD0",
        "swap using fade-in material"
      ]
    }
  },
  "testing_plan": {
    "unit": "vitest + testing-library/react for UI components",
    "e2e": "playwright for cross-device render checks (visual snapshots)",
    "performance": "Lighthouse CI + WebPageTest + RUM (perf metrics)"
  },
  "dev_notes": {
    "git_hooks": {
      "precommit": "lint-staged",
      "prepush": "run tests"
    },
    "env": {
      "VITE_SUPABASE_URL": "",
      "VITE_SUPABASE_KEY": ""
    }
  }
}